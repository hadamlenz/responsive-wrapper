(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class t{constructor(){this.events={}}on(e,t){return"function"!=typeof t?(console.error("The listener callback must be a function, the given type is "+typeof t),!1):"string"!=typeof e?(console.error("The event name must be a string, the given type is "+typeof e),!1):(void 0===this.events[e]&&(this.events[e]={listeners:[]}),void this.events[e].listeners.push(t))}off(e,t){if(void 0===this.events[e])return console.error(`This event: ${e} does not exist`),!1;this.events[e].listeners=this.events[e].listeners.filter((e=>e.toString()!==t.toString()))}dispatch(e,t){if(void 0===this.events[e])return!1;this.events[e].listeners.forEach((e=>{e(t)}))}}class r{constructor(r){e(this,"breakpointValues",null),e(this,"dispatchTheEvent",!1),e(this,"dispatcher",null),e(this,"breakpoints",{up:null,down:null}),e(this,"events",[]),e(this,"iframe",null),e(this,"window",null),r.iframe&&(this.iframe=r.iframe,this.window=r.iframe.contentWindow),null==this.window&&(this.window=window),this.dispatchTheEvent=!0===r.dispatchEvent,this.dispatchTheEvent&&(this.dispatcher=new t),null==this.breakpointValues&&this.setBreakpointValuesObject(),this.detectBreakpoints()}setBreakpointValuesObject(){this.breakpointValues=[];let e=window.getComputedStyle(document.documentElement).getPropertyValue("--bs-breakpoints");if(!e)return console.error("--bs-breakpoints have not been set correctly"),!1;let t=e.split(","),r=t.length;for(const e of t){r--;let t="--bs-breakpoint-"+e.trim();const s=this.window.getComputedStyle(document.documentElement).getPropertyValue(t);s&&(this.breakpointValues[r]={name:e.trim(),index:r,value:s})}}detectBreakpoints(){let e=this,t=Object.keys(this.breakpointValues).length;if(this.breakpointValues&&t>0){if(null==this.breakpoints.up)for(let p=0;p<t;p++){const h="(min-width: "+this.breakpointValues[p].value+")";if(!0===this.window.matchMedia(h).matches){this.breakpoints.up=this.breakpointValues[p];break}}if(null==this.breakpoints.down){for(let l=t-1;l>=0;l--){const o="(max-width: "+this.breakpointValues[l].value+")";!0===this.window.matchMedia(o).matches&&(this.breakpoints.down=this.breakpointValues[l],l=0)}null==this.breakpoints.down&&(this.breakpoints.down={name:"max"})}this.dispatchTheEvent&&null!==this.dispatcher&&this.dispatcher.dispatch("change",e.breakpoints);const r="(min-width: "+this.breakpoints.up.value+")",s=this.window.matchMedia(r),i="(min-width: "+this.breakpoints.down.value+")",n=this.window.matchMedia(i);function a(t){e.breakpoints={up:null,down:null},n.removeEventListener("change",a),s.removeEventListener("change",a),e.detectBreakpoints()}s.addEventListener("change",a),n.addEventListener("change",a)}}on(e,t){this.dispatchTheEvent&&null!==this.dispatcher&&this.dispatcher.on(e,t)}off(e,t){this.dispatchTheEvent&&null!==this.dispatcher&&this.dispatcher.off(e,t)}}class s{constructor(s){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e(this,"breakpoints",null),e(this,"childElements",[]),e(this,"detector",null),e(this,"dispatchEvents",!0),e(this,"dispatcher",null),e(this,"iframe",null),e(this,"isWrapped",!1),e(this,"wrapper",null),e(this,"wrapperClasses",null),e(this,"wrapperId",null),!1===this.makeWrapper(s,n))return console.error("could not make the wrapper "+s),!1;if(!1===this.makeChildren(i))return console.error("we need elements to wrap for "+this.wrapperId),!1;let a={dispatchEvent:!0};return n.iframe&&(a.iframe=n.iframe),this.detector=new r(a),this.dispatchEvents&&(this.dispatcher=new t),!1!==n.toggle&&(this.toggle(),this.detector.on("change",function(e){this.toggle()}.bind(this))),this}toggle(){1==this.shouldWrap()&&0==this.isWrapped?this.wrap():0==this.shouldWrap()&&1==this.isWrapped&&this.unwrap()}makeWrapper(e,t){if("string"==typeof e||e instanceof String){if(document.querySelector("#"+e))return!1;this.wrapper=document.createElement("div"),this.wrapperId=e,this.wrapperClasses=t.wrapper_classes?t.wrapper_classes:null,this.breakpoints=t.breakpoints?t.breakpoints:null}else{if(!(e instanceof Element||e instanceof HTMLDivElement||"object"==typeof e))return console.error("id is not a string or a dom element: "+typeof e),!1;if(!e.id)return console.error("the wrapper element needs an ID for this to work"),!1;this.wrapperId=e.id,this.wrapper=e,this.isWrapped=!0,this.breakpoints=t.breakpoints?t.breakpoints:null}this.setWrapperId(),this.setWrapperClasses(),this.setBreakpoints()}makeChildren(e){if(null===e||0==e.length)if(this.wrapper.dataset.rwGroup){let e=this.wrapper.dataset.rwGroup,t=[];document.querySelectorAll("[data-rw-child-group]").forEach((r=>{r.getAttribute("data-rw-child-group").indexOf(e)>-1&&t.push(r)})),t.length>0&&(this.childElements=[...t])}else{if(!this.wrapper.hasChildNodes())return!1;{let e=this.wrapper.children;this.childElements=[...e]}}else for(var t in Array.isArray(e)||(e=[e]),e){if(null==e[t])return!1;this.childElements=[...this.childElements,e[t]]}return this.childElements.length>0}wrap(){if(this.isWrapped)return!1;if(null===this.childElements||this.childElements.length<=0)return!1;let e=this.childElements,t=Array.isArray(e)&&e.length>0?e[0]:e,r=t.nextElementSibling,s=t.parentNode;if(this.wrapper.contains(s))return console.error("the wrapper contains the parent, sanity is lost"),!1;if(!1!==r&&null!==r&&!1!==s&&null!==s)s.insertBefore(this.wrapper,r);else{if(!1===s||null===s)return!1;s.appendChild(this.wrapper)}for(var i in e){let t=e[i];this.wrapper.appendChild(t)}return this.isWrapped=!0,this.dispatchEvents&&null!==this.dispatcher&&this.dispatcher.dispatch("wrap.rw.wrapper",this.wrapperId),!0}unwrap(){if(!this.isWrapped)return!1;let e=this.wrapper.parentNode;for(;this.wrapper.firstChild;)e.insertBefore(this.wrapper.firstChild,this.wrapper);return this.wrapper.remove(),this.isWrapped=!1,this.dispatchEvents&&null!==this.dispatcher&&this.dispatcher.dispatch("unwrap.rw.wrapper",this.wrapperId),!0}setWrapperId(){this.wrapper.id||this.wrapperId&&("string"==typeof this.wrapperId||this.wrapperId instanceof String)&&this.wrapper.setAttribute("id",this.wrapperId)}setWrapperClasses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];this.wrapper.classList.contains("responsive-wrapper")||this.wrapper.classList.add("responsive-wrapper"),this.wrapperClasses&&Array.isArray(this.wrapperClasses)&&(t=[...t,...this.wrapperClasses]),e.length>0&&(t=[...e,...t]),t.length>0&&t.forEach(function(e){this.wrapper.classList.contains(e)||this.wrapper.classList.add(e)}.bind(this))}setBreakpoints(){this.wrapper.dataset.rwBreakpoints?"all"==this.wrapper.dataset.rwBreakpoints?this.breakpoints="all":this.breakpoints=this.wrapper.dataset.rwBreakpoints.split(","):Array.isArray(this.breakpoints)&&this.breakpoints.length>0?this.wrapper.setAttribute("data-rw-breakpoints",this.breakpoints.join()):"string"==typeof this.breakpoints||this.breakpoints instanceof String?this.wrapper.setAttribute("data-rw-breakpoints",this.breakpoints):this.wrapper.setAttribute("data-rw-breakpoints","all")}shouldWrap(){return null==this.breakpoints||"all"==this.breakpoints||!!this.breakpoints.includes(this.detector.breakpoints.up.name)}on(e,t){this.dispatchEvents&&null!==this.dispatcher&&this.dispatcher.on(e,t)}off(e,t){this.dispatchEvents&&null!==this.dispatcher&&this.dispatcher.off(e,t)}}class i{constructor(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e(this,"wrapperIds",[]),e(this,"wrapperClasses",[]),e(this,"wrapperElements",[]),e(this,"wrapperCount",0),e(this,"wrapperOptions",[]),e(this,"wrappers",[]),e(this,"wrapperObjects",[]),!Array.isArray(t)||!t.length>0)return console.error("wrappers are not here or are not an array"),!1;if(null!==r&&Array.isArray(r)&&r.length>0){for(var i in r){var n=!1;if("string"==typeof r[i]||r[i]instanceof String?n=document.querySelector(r[i]):r[i]instanceof Element&&(n=r[i]),!n)return console.error("element for wrapping "+r[i]+" is not here"),!1}this.wrapperElements=r}for(var i in t){if("string"==typeof t[i]||t[i]instanceof String)this.wrapperIds[i]=t[i];else{if(!(t[i]instanceof Element))return console.error("the wrapper is of type "+typeof t[i]+" and cannot be used to wrap"),!1;if(!t[i].id)return!1;this.wrapperIds[i]=t[i].id,this.wrappers[i]=t[i]}this.wrapperOptions[i]=[],s&&(s.breakpoints&&(this.wrapperOptions[i].breakpoints=s.breakpoints),s.wrapper_classes&&(this.wrapperOptions[i].wrapper_classes=s.wrapper_classes[i]))}return!1!==s.make&&this.make(),this}make(){if(this.wrapperIds.length>0&&this.wrapperCount<this.wrapperIds.length)for(var e in this.wrapperIds){if(this.wrapperCount!=e)return console.log("the last wrapper failed to make()"),!1;let t=null;0==this.wrapperCount&&this.wrapperElements?t=this.wrapperElements:this.wrapperCount>0&&this.wrapperObjects[e-1]&&(t=[this.wrapperObjects[e-1].wrapper]);let r=null;if(this.wrappers.length>0?r=new s(this.wrappers[e],t,this.wrapperOptions[e]):this.wrapperIds.length>0&&(r=new s(this.wrapperIds[e],t,this.wrapperOptions[e])),null===r)return!1;this.wrapperObjects.push(r),this.wrapperCount++}}}class n{constructor(e){let t=document.querySelectorAll(".responsive-wrapper");e.possibleWrapperArray&&(t=[...t,...e.possibleWrapperArray]),e.iframe&&(this.iframe=e.iframe);let r=[],n=[];for(var a in t)t[a].id?t[a].hasChildNodes()||t[a].hasAttribute("data-rw-group")?0==a?r[a]=t[0]:r[a-1]&&r[a-1].contains(t[a])?(n.push([t[a],t[a-1]]),r[a-1]=null):r[a]=t[a]:console.error("we dont have children to wrap"):console.log("missing IDs to make the wrapper");for(var a in r)if(r[a]&&null!==r[a]){let e=[];e.iframe=this.iframe?this.iframe:null,new s(r[a],null,e)}for(var a in n)new i(n[a])}}let a=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e(this,"init",null),e(this,"iframe",null),this.iframe=t.iframe?t.iframe:null,!1!==t.init){let e=[];e.iframe&&t.iframe,this.init=new n(e)}}wrap(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!==this.iframe&&(r.iframe=this.iframe),new s(e,t,r)}wraps(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!==this.iframe&&(r.iframe=this.iframe),new i(e,t,r)}};window.responsiveWrapper=a})();
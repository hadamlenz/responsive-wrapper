(()=>{"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(){this.events={}}on(e,t){return"function"!=typeof t?(console.error("The listener callback must be a function, the given type is "+typeof t),!1):"string"!=typeof e?(console.error("The event name must be a string, the given type is "+typeof e),!1):(void 0===this.events[e]&&(this.events[e]={listeners:[]}),void this.events[e].listeners.push(t))}off(e,t){if(void 0===this.events[e])return console.error(`This event: ${e} does not exist`),!1;this.events[e].listeners=this.events[e].listeners.filter((e=>e.toString()!==t.toString()))}dispatch(e,t){if(void 0===this.events[e])return!1;this.events[e].listeners.forEach((e=>{e(t)}))}}class s{constructor(s){e(this,"breakpointValues",null),e(this,"dispatchTheEvent",!1),e(this,"dispatcher",null),e(this,"breakpoints",{up:null,down:null}),e(this,"events",[]),this.dispatchTheEvent=!0===s.dispatchEvent,this.dispatchTheEvent&&(this.dispatcher=new t),null==this.breakpointValues&&this.setBreakpointValuesObject(),this.detectBreakpoints()}setBreakpointValuesObject(){this.breakpointValues=[];let e=window.getComputedStyle(document.documentElement).getPropertyValue("--bs-breakpoints");if(!e)return console.log("--bs-breakpoints have not been set correctly"),!1;let t=e.split(","),s=t.length;for(const e of t){s--;let t="--bs-breakpoint-"+e.trim();const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);r&&(this.breakpointValues[s]={name:e.trim(),index:s,value:r})}}detectBreakpoints(){let e=this,t=Object.keys(this.breakpointValues).length;if(this.breakpointValues&&t>0){if(null==this.breakpoints.up)for(let p=0;p<t;p++){const h="(min-width: "+this.breakpointValues[p].value+")";if(!0===window.matchMedia(h).matches){this.breakpoints.up=this.breakpointValues[p];break}}if(null==this.breakpoints.down){for(let o=t-1;o>=0;o--){const l="(max-width: "+this.breakpointValues[o].value+")";!0===window.matchMedia(l).matches&&(this.breakpoints.down=this.breakpointValues[o],o=0)}null==this.breakpoints.down&&(this.breakpoints.down={name:"max"})}this.dispatchTheEvent&&null!==this.dispatcher&&this.dispatcher.dispatch("change",e.breakpoints);const s="(min-width: "+this.breakpoints.up.value+")",r=window.matchMedia(s),i="(min-width: "+this.breakpoints.down.value+")",n=window.matchMedia(i);function a(t){e.breakpoints={up:null,down:null},n.removeEventListener("change",a),r.removeEventListener("change",a),e.detectBreakpoints()}r.addEventListener("change",a),n.addEventListener("change",a)}}on(e,t){this.dispatchTheEvent&&null!==this.dispatcher&&this.dispatcher.on(e,t)}off(e,t){this.dispatchTheEvent&&null!==this.dispatcher&&this.dispatcher.off(e,t)}}class r{constructor(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e(this,"breakpoints",null),e(this,"childElements",[]),e(this,"detector",null),e(this,"dispatchEvents",!0),e(this,"dispatcher",null),e(this,"isWrapped",!1),e(this,"wrapper",null),e(this,"wrapperClasses",null),e(this,"wrapperId",null),!1===this.makeWrapper(r,n)?(console.log("could not make the wrapper "+this.wrapperId),!1):!1===this.makeChildren(i)?(console.log("we need elements to wrap for "+this.wrapperId),!1):(this.detector=new s({dispatchEvent:!0}),this.dispatchEvents&&(this.dispatcher=new t),!1!==n.make&&(this.make(),this.detector.on("change",function(e){this.make()}.bind(this))),this)}make(){1==this.shouldWrap()&&0==this.isWrapped?this.wrap():0==this.shouldWrap()&&1==this.isWrapped&&this.unwrap()}makeWrapper(e,t){if("string"==typeof e||e instanceof String){if(document.querySelector("#"+e))return console.log("wrapper already on page"),!1;this.wrapper=document.createElement("div"),this.wrapperId=e,this.wrapperClasses=t.wrapper_classes?t.wrapper_classes:null,this.breakpoints=t.breakpoints?t.breakpoints:null}else{if(!(e instanceof Element))return console.log("id is not a string or a dom element: "+typeof e),!1;if(!e.id)return console.log("the wrapper element needs an ID for this to work"),!1;this.wrapperId=e.id,this.wrapper=e,this.isWrapped=!0,this.breakpoints=t.breakpoints?t.breakpoints:null}this.setWrapperId(),this.setWrapperClasses(),this.setBreakpoints()}makeChildren(e){if(null===e||0==e.length)if(this.wrapper.dataset.rwGroup){let e=this.wrapper.dataset.rwGroup,t=[];document.querySelectorAll("[data-rw-child-group]").forEach((s=>{s.getAttribute("data-rw-child-group").indexOf(e)>-1&&t.push(s)})),t.length>0&&(this.childElements=[...t])}else{if(!this.wrapper.hasChildNodes())return!1;{let e=this.wrapper.children;this.childElements=[...e]}}else for(var t in Array.isArray(e)||(e=[e]),e){if(null==e[t])return!1;this.childElements=[...this.childElements,e[t]]}return this.childElements.length>0}wrap(){if(this.isWrapped)return console.log("we dont need to wrap it any further"),!1;if(null===this.childElements||this.childElements.length<=0)return console.log("no elements"),!1;let e=this.childElements,t=Array.isArray(e)&&e.length>0?e[0]:e,s=t.nextElementSibling,r=t.parentNode;if(this.wrapper.contains(r))return console.log("the wrapper contains the parent, sanity is lost"),!1;if(!1!==s&&null!==s&&!1!==r&&null!==r)r.insertBefore(this.wrapper,s);else{if(!1===r||null===r)return!1;r.appendChild(this.wrapper)}for(var i in e){let t=e[i];this.wrapper.appendChild(t)}return this.isWrapped=!0,this.dispatchEvents&&null!==this.dispatcher&&this.dispatcher.dispatch("wrap.rw.wrapper",this.wrapperId),!0}unwrap(){if(!this.isWrapped)return console.log("we dont need to unwrap it any further"),!1;let e=this.wrapper.parentNode;for(;this.wrapper.firstChild;)e.insertBefore(this.wrapper.firstChild,this.wrapper);return this.wrapper.remove(),this.isWrapped=!1,this.dispatchEvents&&null!==this.dispatcher&&this.dispatcher.dispatch("unwrap.rw.wrapper",this.wrapperId),!0}setWrapperId(){this.wrapper.id||(this.wrapperId&&("string"==typeof this.wrapperId||this.wrapperId instanceof String)?this.wrapper.setAttribute("id",this.wrapperId):console.log("id is not a string"))}setWrapperClasses(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];this.wrapper.classList.contains("responsive-wrapper")||this.wrapper.classList.add("responsive-wrapper"),this.wrapperClasses&&Array.isArray(this.wrapperClasses)&&(t=[...t,...this.wrapperClasses]),e.length>0&&(t=[...e,...t]),t.length>0&&t.forEach(function(e){this.wrapper.classList.contains(e)||this.wrapper.classList.add(e)}.bind(this))}setBreakpoints(){this.wrapper.dataset.rwBreakpoints?"all"==this.wrapper.dataset.rwBreakpoints?this.breakpoints="all":this.breakpoints=this.wrapper.dataset.rwBreakpoints.split(","):Array.isArray(this.breakpoints)&&this.breakpoints.length>0?this.wrapper.setAttribute("data-rw-breakpoints",this.breakpoints.join()):"string"==typeof this.breakpoints||this.breakpoints instanceof String?this.wrapper.setAttribute("data-rw-breakpoints",this.breakpoints):this.wrapper.setAttribute("data-rw-breakpoints","all")}shouldWrap(){return null==this.breakpoints||"all"==this.breakpoints||!!this.breakpoints.includes(this.detector.breakpoints.up.name)}on(e,t){this.dispatchEvents&&null!==this.dispatcher&&this.dispatcher.on(e,t)}off(e,t){this.dispatchEvents&&null!==this.dispatcher&&this.dispatcher.off(e,t)}}class i{constructor(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e(this,"wrapperIds",[]),e(this,"wrapperClasses",[]),e(this,"wrapperElements",[]),e(this,"wrapperCount",0),e(this,"wrapperOptions",[]),e(this,"wrappers",[]),e(this,"wrapperObjects",[]),!Array.isArray(t)||!t.length>0)return console.log("wrappers are not here or are not an array"),!1;if(null!==s&&Array.isArray(s)&&s.length>0){for(var i in s){var n=!1;if("string"==typeof s[i]||s[i]instanceof String?n=document.querySelector(s[i]):s[i]instanceof Element&&(n=s[i]),!n)return console.log("element for wrapping "+s[i]+" is not here"),!1}this.wrapperElements=s}for(var i in t){if("string"==typeof t[i]||t[i]instanceof String)this.wrapperIds[i]=t[i];else{if(!(t[i]instanceof Element))return console.log("the wrapper is of type "+typeof t[i]+" and cannot be used to wrap"),!1;if(!t[i].id)return!1;this.wrapperIds[i]=t[i].id,this.wrappers[i]=t[i]}this.wrapperOptions[i]=[],r&&(r.breakpoints&&(this.wrapperOptions[i].breakpoints=r.breakpoints),r.wrapper_classes&&(this.wrapperOptions[i].wrapper_classes=r.wrapper_classes[i]))}return!1!==r.make&&this.make(),this}make(){if(this.wrapperIds.length>0&&this.wrapperCount<this.wrapperIds.length)for(var e in this.wrapperIds){if(this.wrapperCount!=e)return console.log("the last wrapper failed to make()"),!1;let t=null;0==this.wrapperCount&&this.wrapperElements?t=this.wrapperElements:this.wrapperCount>0&&this.wrapperObjects[e-1]&&(t=[this.wrapperObjects[e-1].wrapper]);let s=null;if(this.wrappers.length>0?s=new r(this.wrappers[e],t,this.wrapperOptions[e]):this.wrapperIds.length>0&&(s=new r(this.wrapperIds[e],t,this.wrapperOptions[e])),null===s)return console.log("wrapper could not be made in the factory"),!1;this.wrapperObjects.push(s),this.wrapperCount++}}}class n{constructor(){let e=document.querySelectorAll(".responsive-wrapper");e=[...e];let t=[],s=[];for(var r in e)e[r].id&&(e[r].hasChildNodes()||e[r].hasAttribute("data-rw-group")?0==r?t[r]=e[0]:t[r-1]&&t[r-1].contains(e[r])?(s.push([e[r],e[r-1]]),t[r-1]=null):t[r]=e[r]:console.log("we dont have children to wrap"));for(var r in console.log(t),console.log(s),t);for(var r in s)new i(s[r])}}let a=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e(this,"init",null),!1!==t.init&&(this.init=new n)}wrap(e,t){return new r(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])}wraps(e,t){return new i(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])}};window.responsiveWrapper=a})();